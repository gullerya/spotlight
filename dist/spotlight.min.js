const t=Symbol("parent.key"),e=Symbol("target.key"),n=Symbol("shape.key"),o=Symbol("coords.extractor.key"),r=Symbol("render.key"),s=Object.freeze({circle:"circle",oval:"oval",box:"box"}),i=Object.freeze({shape:s.circle});export{s as SHAPES,a as spotlight};function a(e,n,o){const r=Object.assign({},i,o,{target:e,parent:n||document.body});!function(t){if(!t.target||t.target.nodeType!==Node.ELEMENT_NODE||t.target===document.body)throw new Error("invalid target ("+t.target+")");if(!t.parent||t.parent.nodeType!==Node.ELEMENT_NODE)throw new Error("invalid parent ("+t.parent+")");if(!t.parent.contains(t.target)||t.parent===t.target)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element");t.shape&&t.shape in s||(console.error("invalid shape ("+t.shape+"), falling back to the default (circle)"),t.shape=s.circle)}(r);const a=document.createElement("spotlight-scene");return a[t]=r.parent,a.shape=r.shape,a.target=r.target,a[t].appendChild(a),a}const h=document.createElement("template");h.innerHTML='\n\t<style>\n\t\t:host {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tz-index: 999;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t:host(.shown) .spotlight {\n\t\t\tborder-color: rgba(0, 0, 0, 0.4);\n\t\t}\n\n\t\t.spotlight {\n\t\t\tposition: absolute;\n\t\t\tborder: 200vmax solid;\n\t\t\tborder-color: rgba(0, 0, 0, 0);\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\ttransition: all 333ms;\n\t\t}\n\n\t\t.inner-fence {\n\t\t\tposition: absolute;\n\t\t\ttop: -2px;\n\t\t\tleft: -2px;\n\t\t\tright: -2px;\n\t\t\tbottom: -2px;\n\t\t\tborder: 3px solid #ff0;\n\t\t}\n\n\t\t:host(.box) .spotlight,\n\t\t:host(.box) .inner-fence {\n\t\t\tborder-radius: calc(200vmax + 24px);\n\t\t}\n\n\t\t:host(.oval) .spotlight,\n\t\t:host(.oval) .inner-fence {\n\t\t\tborder-radius: 50%;\n\t\t}\n\n\t\t:host(.circle) .spotlight,\n\t\t:host(.circle) .inner-fence {\n\t\t\tborder-radius: 50%;\n\t\t}\n\t</style>\n\n\t<div class="spotlight shadow">\n\t\t<div class="inner-fence"></div>\n\t</div>\n',customElements.define("spotlight-scene",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(h.content.cloneNode(!0))}connectedCallback(){"number"==typeof this.offsetWidth&&this.classList.add("shown")}get parent(){return this[t]}get shape(){return this[n]}set shape(t){this[n]!==t&&(this[n]=t,this[r]())}get target(){return this[e]}set target(t){this.moveTo(t)}moveTo(n){if(this[e]!==n){if(!n||n.nodeType!==Node.ELEMENT_NODE||n===document.body)throw new Error("invalid target");if(!this[t].contains(n)||this[t]===n)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element");return this[e]=n,this[r]()}}close(){this.shadowRoot.querySelector(".spotlight").addEventListener("transitionend",()=>{this[t].removeChild(this)}),this.classList.remove("shown")}[r](){if(!this[e])return;const t=this[o](this[e]);let r,i,a;switch(this[n]){case s.box:r=t.width+24,i=t.height+24,a=s.box;break;case s.oval:r=t.width*Math.pow(2,.5),i=t.height*Math.pow(2,.5),a=s.oval;break;case s.circle:default:r=i=Math.pow(Math.pow(t.width,2)+Math.pow(t.height,2),.5)+12,a=s.circle}this.shadowRoot.querySelectorAll(".spotlight").forEach(e=>{e.style.top=t.y+t.height/2+"px",e.style.left=t.x+t.width/2+"px",e.style.width=r+"px",e.style.height=i+"px"}),Object.keys(s).forEach(t=>{s[t]!==a&&this.classList.remove(s[t])}),this.classList.add(a)}[o](t){return t.getBoundingClientRect()}});