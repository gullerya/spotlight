const t=Symbol("parent.key"),e=Symbol("target.key"),n=Symbol("coords.extractor.key"),o={};export function spotlight(e,n,r){const s=Object.assign(o,r,{target:e,parent:n||document.body});!function(t){if(!t.target||t.target.nodeType!==Node.ELEMENT_NODE||t.target===document.body)throw new Error("invalid target");if(!t.parent||t.parent.nodeType!==Node.ELEMENT_NODE)throw new Error("target parent MUST be an element node");if(!t.parent.contains(t.target)||t.parent===t.target)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element")}(s);const i=document.createElement("spotlight-scene");return i[t]=s.parent,i.target=s.target,i[t].appendChild(i),i};const r=document.createElement("template");r.innerHTML='\n\t<style>\n\t\t:host {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.spotlight {\n\t\t\tposition: absolute;\n\t\t\tborder: 200vmax solid;\n\t\t\tborder-color: rgba(0, 0, 0);\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\topacity: 0;\n\t\t\ttransition: all 333ms;\n\t\t}\n\n\t\t.spotlight.shown {\n\t\t\topacity: 0.4;\n\t\t}\n\n\t\t.round {\n\t\t\tborder-radius: 50%;\n\t\t}\n\t</style>\n\n\t<div class="spotlight round"></div>\n',customElements.define("spotlight-scene",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(r.content.cloneNode(!0)),setTimeout(()=>this.shadowRoot.querySelector(".spotlight").classList.add("shown"),0)}get parent(){return this[t]}get target(){return this[e]}set target(o){if(!o||o.nodeType!==Node.ELEMENT_NODE||o===document.body)throw new Error("invalid target");if(!this[t].contains(o)||this[t]===o)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element");this[e]=o;const r=this[n](this[e]),s=this.shadowRoot.querySelector(".spotlight");s.style.top=r.y+r.height/2+"px",s.style.left=r.x+r.width/2+"px",s.style.width=s.style.height=Math.max(r.width,r.height)+"px"}remove(){const e=this.shadowRoot.querySelector(".spotlight");e.addEventListener("transitionend",()=>{this[t].removeChild(this)}),e.classList.remove("shown")}[n](t){return t.getBoundingClientRect()}});