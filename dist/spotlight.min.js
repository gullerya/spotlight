const t=Symbol("parent.key"),e=Symbol("target.key"),n=Symbol("shape.key"),o=Symbol("coords.extractor.key"),s=Symbol("render.key"),r=Object.freeze({circle:"circle",oval:"oval",box:"box"}),i=Object.freeze({shape:r.circle});export{r as SHAPES,a as spotlight};function a(e,n,o){const s=Object.assign({},i,o,{target:e,parent:n||document.body});!function(t){if(!t.target||t.target.nodeType!==Node.ELEMENT_NODE||t.target===document.body)throw new Error("invalid target ("+t.target+")");if(!t.parent||t.parent.nodeType!==Node.ELEMENT_NODE)throw new Error("invalid parent ("+t.parent+")");if(!t.parent.contains(t.target)||t.parent===t.target)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element");t.shape&&t.shape in r||(console.error("invalid shape ("+t.shape+"), falling back to the default (circle)"),t.shape=r.circle)}(s);const a=document.createElement("spotlight-scene");return a[t]=s.parent,a.shape=s.shape,a.target=s.target,a[t].appendChild(a),a}const h=document.createElement("template");h.innerHTML='\n\t<style>\n\t\t:host {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tcolor: #000;\n\t\t\tz-index: 999;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t:host(.shown) .spotlight {\n\t\t\topacity: 0.4;\n\t\t}\n\n\t\t.spotlight {\n\t\t\tposition: absolute;\n\t\t\tborder: 200vmax solid;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\topacity: 0;\n\t\t\ttransition: all 333ms;\n\t\t}\n\n\t\t:host .spotlight.border {\n\t\t\tborder: 3px solid #ff0;\n\t\t\topacity: 1;\n\t\t}\n\n\t\t:host(.box) .spotlight {\n\t\t\tborder-radius: calc(200vmax + 24px);\n\t\t}\n\n\t\t:host(.oval) .spotlight {\n\t\t\tborder-radius: 50%;\n\t\t}\n\n\t\t:host(.circle) .spotlight {\n\t\t\tborder-radius: 50%;\n\t\t}\n\t</style>\n\n\t<div class="spotlight shadow"></div>\n\t<div class="spotlight border"></div>\n',customElements.define("spotlight-scene",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(h.content.cloneNode(!0))}connectedCallback(){"number"==typeof this.offsetWidth&&this.classList.add("shown")}get parent(){return this[t]}get shape(){return this[n]}set shape(t){this[n]!==t&&(this[n]=t,this[s]())}get target(){return this[e]}set target(n){if(this[e]!==n){if(!n||n.nodeType!==Node.ELEMENT_NODE||n===document.body)throw new Error("invalid target");if(!this[t].contains(n)||this[t]===n)throw new Error("target MUST be a child of a given parent; they MAY NOT be the same element");this[e]=n,this[s]()}}remove(){this.shadowRoot.querySelector(".spotlight").addEventListener("transitionend",()=>{this[t].removeChild(this)}),this.classList.remove("shown")}[s](){if(!this[e])return;const t=this[o](this[e]);let s,i,a;switch(this[n]){case r.box:s=t.width+24,i=t.height+24,a=r.box;break;case r.oval:s=t.width*Math.pow(2,.5),i=t.height*Math.pow(2,.5),a=r.oval;break;case r.circle:default:s=i=Math.pow(Math.pow(t.width,2)+Math.pow(t.height,2),.5)+12,a=r.circle}this.shadowRoot.querySelectorAll(".spotlight").forEach(e=>{e.style.top=t.y+t.height/2+"px",e.style.left=t.x+t.width/2+"px",e.style.width=s+"px",e.style.height=i+"px"}),Object.keys(r).forEach(t=>{r[t]!==a&&this.classList.remove(r[t])}),this.classList.add(a)}[o](t){return t.getBoundingClientRect()}});